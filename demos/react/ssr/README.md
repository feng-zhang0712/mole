# SSR React App

ä¸€ä¸ªå®Œæ•´çš„æœåŠ¡ç«¯æ¸²æŸ“(SSR) Reactåº”ç”¨ç¨‹åºï¼Œè§£å†³äº†React SSRå¼€å‘ä¸­çš„æ‰€æœ‰ä¸»è¦æŒ‘æˆ˜ã€‚

## ğŸš€ ç‰¹æ€§

### âœ… å·²è§£å†³çš„SSRæ ¸å¿ƒé—®é¢˜

1. **æ•°æ®è·å–å’ŒçŠ¶æ€åŒæ­¥**
   - æœåŠ¡ç«¯é¢„å–æ•°æ®ï¼Œé¿å…å®¢æˆ·ç«¯é‡å¤è¯·æ±‚
   - çŠ¶æ€ä¸€è‡´æ€§ä¿è¯ï¼Œé˜²æ­¢æ°´åˆä¸åŒ¹é…
   - æ™ºèƒ½æ•°æ®ç¼“å­˜ç­–ç•¥

2. **è·¯ç”±å¤„ç†**
   - æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è·¯ç”±åè°ƒ
   - åŠ¨æ€è·¯ç”±å‚æ•°å¤„ç†
   - 404é¡µé¢æœåŠ¡ç«¯å¤„ç†

3. **ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå…¼å®¹æ€§**
   - é¿å…æœåŠ¡ç«¯ä½¿ç”¨æµè§ˆå™¨API
   - å¹³æ»‘çš„æ°´åˆè¿‡ç¨‹
   - ç»„ä»¶æ¸²æŸ“å·®å¼‚å¤„ç†

4. **æ ·å¼å¤„ç†**
   - å…³é”®CSSå†…è”ï¼Œé˜²æ­¢FOUC
   - CSS-in-JSæœåŠ¡ç«¯æ”¯æŒ
   - æ ·å¼é—ªçƒé—®é¢˜è§£å†³

5. **æ€§èƒ½ä¼˜åŒ–**
   - ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
   - èµ„æºé¢„åŠ è½½
   - å‹ç¼©å’Œç¼“å­˜ç­–ç•¥

6. **SEOå’Œå…ƒæ•°æ®**
   - åŠ¨æ€å…ƒæ ‡ç­¾ç”Ÿæˆ
   - Open Graphå’ŒTwitter Cardæ”¯æŒ
   - ç»“æ„åŒ–æ•°æ®å¤„ç†

7. **é”™è¯¯å¤„ç†**
   - æœåŠ¡ç«¯é”™è¯¯è¾¹ç•Œ
   - ä¼˜é›…é™çº§ç­–ç•¥
   - é”™è¯¯ç›‘æ§å’ŒæŠ¥å‘Š

8. **æ„å»ºå’Œéƒ¨ç½²**
   - åˆ†ç¦»çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ„å»º
   - ç¯å¢ƒå˜é‡é…ç½®
   - Dockerå®¹å™¨åŒ–æ”¯æŒ

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: React 18, React Router v6, Styled Components
- **åç«¯**: Node.js, Express.js
- **æ„å»ºå·¥å…·**: Webpack 5, Babel
- **å¼€å‘å·¥å…·**: Nodemon, Concurrently
- **æ¨¡å—ç³»ç»Ÿ**: ES Modules (ESM)
- **æµ‹è¯•**: Jest, React Testing Library

## ğŸ“ é¡¹ç›®ç»“æ„

```
ssr-react-app/
â”œâ”€â”€ src/                    # å‰ç«¯æºä»£ç 
â”‚   â”œâ”€â”€ components/         # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ context/           # React Context
â”‚   â”œâ”€â”€ App.js             # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ client.js          # å®¢æˆ·ç«¯å…¥å£
â”œâ”€â”€ server/                 # æœåŠ¡ç«¯ä»£ç 
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.js           # æœåŠ¡ç«¯å…¥å£
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”œâ”€â”€ dist/                   # æ„å»ºè¾“å‡º
â”œâ”€â”€ webpack.config.js       # å®¢æˆ·ç«¯webpacké…ç½®
â”œâ”€â”€ webpack.server.js       # æœåŠ¡ç«¯webpacké…ç½®
â””â”€â”€ package.json            # é¡¹ç›®é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æ¨¡å¼

```bash
npm run dev
```

è¿™å°†åŒæ—¶å¯åŠ¨ï¼š
- æœåŠ¡ç«¯å¼€å‘æœåŠ¡å™¨ (ç«¯å£ 3000)
- å®¢æˆ·ç«¯webpackå¼€å‘æœåŠ¡å™¨
- çƒ­é‡è½½æ”¯æŒ

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

### å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨

```bash
npm start
```

## ğŸ”§ å¼€å‘è„šæœ¬

- `npm run dev` - å¼€å‘æ¨¡å¼ï¼ˆåŒæ—¶è¿è¡Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼‰
- `npm run dev:server` - ä»…å¯åŠ¨æœåŠ¡ç«¯å¼€å‘æœåŠ¡å™¨
- `npm run dev:client` - ä»…å¯åŠ¨å®¢æˆ·ç«¯webpackå¼€å‘æœåŠ¡å™¨
- `npm run build` - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- `npm run build:client` - æ„å»ºå®¢æˆ·ç«¯ä»£ç 
- `npm run build:server` - æ„å»ºæœåŠ¡ç«¯ä»£ç 
- `npm start` - å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
- `npm test` - è¿è¡Œæµ‹è¯•

## ğŸŒ è®¿é—®åœ°å€

- **å¼€å‘ç¯å¢ƒ**: http://localhost:3000
- **å¥åº·æ£€æŸ¥**: http://localhost:3000/health
- **APIç«¯ç‚¹**: http://localhost:3000/api/*

## ğŸ“Š æ€§èƒ½ç‰¹æ€§

- **æœåŠ¡ç«¯æ¸²æŸ“**: é¦–æ¬¡åŠ è½½æ€§èƒ½ä¼˜åŒ–
- **ä»£ç åˆ†å‰²**: æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘åˆå§‹åŒ…å¤§å°
- **èµ„æºé¢„åŠ è½½**: å…³é”®èµ„æºé¢„åŠ è½½
- **å‹ç¼©**: Gzipå‹ç¼©å“åº”
- **ç¼“å­˜**: é™æ€èµ„æºç¼“å­˜ç­–ç•¥

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **Helmet**: å®‰å…¨å¤´è®¾ç½®
- **CORS**: è·¨åŸŸèµ„æºå…±äº«é…ç½®
- **XSSé˜²æŠ¤**: çŠ¶æ€åºåˆ—åŒ–å®‰å…¨å¤„ç†
- **å†…å®¹å®‰å…¨ç­–ç•¥**: CSPé…ç½®

## ğŸ§ª æµ‹è¯•

```bash
npm test                    # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test -- --watch        # ç›‘å¬æ¨¡å¼
npm test -- --coverage     # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

## ğŸ³ Dockeræ”¯æŒ

### å¼€å‘ç¯å¢ƒ

```bash
docker-compose -f docker-compose.dev.yml up
```

### ç”Ÿäº§ç¯å¢ƒ

```bash
docker-compose up
```

## ğŸ“ ç¯å¢ƒå˜é‡

å¤åˆ¶ `env.example` åˆ° `.env` å¹¶é…ç½®ï¼š

```bash
cp env.example .env
```

## ğŸ¤ è´¡çŒ®

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆé€‰æ‹©ESMè€Œä¸æ˜¯CommonJSï¼Ÿ
A: ESMæä¾›æ›´å¥½çš„æ¨¡å—ç³»ç»Ÿã€tree-shakingæ”¯æŒå’Œç°ä»£JavaScriptç‰¹æ€§ã€‚

### Q: å¦‚ä½•å¤„ç†æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„çŠ¶æ€åŒæ­¥ï¼Ÿ
A: ä½¿ç”¨`isHydrated`æ ‡å¿—å’Œé¢„åŠ è½½çŠ¶æ€ï¼Œç¡®ä¿æœåŠ¡ç«¯æ•°æ®ä¸ä¼šåœ¨å®¢æˆ·ç«¯é‡å¤è·å–ã€‚

### Q: å¦‚ä½•ä¼˜åŒ–SEOï¼Ÿ
A: ä½¿ç”¨React HelmetåŠ¨æ€ç”Ÿæˆå…ƒæ ‡ç­¾ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ç¡®ä¿æœç´¢å¼•æ“å¯ä»¥æ­£ç¡®ç´¢å¼•å†…å®¹ã€‚

### Q: å¦‚ä½•å¤„ç†é”™è¯¯ï¼Ÿ
A: å®ç°é”™è¯¯è¾¹ç•Œã€æœåŠ¡ç«¯é”™è¯¯å¤„ç†å’Œä¼˜é›…é™çº§ç­–ç•¥ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [Reactå®˜æ–¹æ–‡æ¡£](https://reactjs.org/)
- [React Routeræ–‡æ¡£](https://reactrouter.com/)
- [Webpackæ–‡æ¡£](https://webpack.js.org/)
- [Express.jsæ–‡æ¡£](https://expressjs.com/)
- [Jestæµ‹è¯•æ¡†æ¶](https://jestjs.io/)

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„SSR Reactåº”ç”¨ç¨‹åºç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•è§£å†³React SSRå¼€å‘ä¸­çš„æ‰€æœ‰ä¸»è¦æŒ‘æˆ˜ã€‚è¯·æ ¹æ®æ‚¨çš„å…·ä½“éœ€æ±‚è¿›è¡Œè°ƒæ•´å’Œä¼˜åŒ–ã€‚
