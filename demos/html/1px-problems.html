<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1px问题各种场景演示</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
      padding: 20px;
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }

    .header p {
      font-size: 1.1em;
      opacity: 0.9;
    }

    .content {
      padding: 30px;
    }

    .section {
      margin-bottom: 40px;
      padding: 20px;
      border-radius: 8px;
      background: #fafafa;
    }

    .section h2 {
      color: #333;
      margin-bottom: 20px;
      font-size: 1.5em;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
    }

    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .demo-item {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .demo-title {
      font-weight: bold;
      color: #333;
      margin-bottom: 10px;
      font-size: 1.1em;
    }

    .demo-description {
      color: #666;
      font-size: 0.9em;
      margin-bottom: 15px;
      line-height: 1.4;
    }

    .demo-area {
      min-height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f8f9fa;
      border-radius: 4px;
      margin-bottom: 10px;
      position: relative;
    }

    .code-block {
      background: #2d3748;
      color: #e2e8f0;
      padding: 15px;
      border-radius: 6px;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.85em;
      line-height: 1.4;
      overflow-x: auto;
      margin-top: 10px;
    }

    /* 1. 分割线和装饰线 */
    .hr-demo hr {
      border: none;
      height: 1px;
      background: #e74c3c;
      margin: 10px 0;
    }

    .underline-demo {
      text-decoration: underline;
      text-decoration-color: #3498db;
      text-decoration-thickness: 1px;
    }

    .strikethrough-demo {
      text-decoration: line-through;
      text-decoration-color: #e67e22;
      text-decoration-thickness: 1px;
    }

    .decorative-line {
      position: relative;
    }

    .decorative-line::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 100%;
      height: 1px;
      background: linear-gradient(to right, #9b59b6, #e74c3c);
    }

    /* 2. 阴影效果 */
    .box-shadow-demo {
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }

    .text-shadow-demo {
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }

    .drop-shadow-demo {
      filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.3));
    }

    /* 3. 定位和布局 */
    .position-demo {
      position: relative;
      background: #ecf0f1;
    }

    .position-demo .absolute-element {
      position: absolute;
      top: 1px;
      left: 1px;
      width: 30px;
      height: 30px;
      background: #e74c3c;
      border-radius: 4px;
    }

    .grid-demo {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1px;
      background: #95a5a6;
      padding: 1px;
    }

    .grid-demo>div {
      background: #ecf0f1;
      padding: 10px;
      text-align: center;
    }

    /* 4. 字体和文字 */
    .small-font-demo {
      font-size: 12px;
      line-height: 1px;
    }

    .letter-spacing-demo {
      letter-spacing: 1px;
    }

    .word-spacing-demo {
      word-spacing: 1px;
    }

    /* 5. 背景和渐变 */
    .gradient-demo {
      background: linear-gradient(45deg, #f1c40f 0%, #f1c40f 1px, transparent 1px, transparent 100%);
      background-size: 10px 10px;
    }

    .radial-demo {
      background: radial-gradient(circle at center, #3498db 0%, #3498db 1px, transparent 1px);
      background-size: 20px 20px;
    }

    /* 6. 动画和过渡 */
    .animation-demo {
      animation: move 2s infinite;
    }

    @keyframes move {
      0% {
        transform: translateX(0px);
      }

      50% {
        transform: translateX(1px);
      }

      100% {
        transform: translateX(0px);
      }
    }

    .transition-demo {
      transition: all 0.3s ease;
    }

    .transition-demo:hover {
      transform: translateX(1px);
    }

    /* 7. 表单元素 */
    .form-demo input {
      border: 1px solid #bdc3c7;
      padding: 8px;
      border-radius: 4px;
      margin: 5px;
    }

    .form-demo button {
      border: 1px solid #3498db;
      background: #3498db;
      color: white;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    }

    /* 8. 列表元素 */
    .list-demo ul {
      list-style: none;
    }

    .list-demo li {
      border-bottom: 1px solid #ecf0f1;
      padding: 8px 0;
    }

    .table-demo table {
      border-collapse: collapse;
      width: 100%;
    }

    .table-demo td,
    .table-demo th {
      border: 1px solid #bdc3c7;
      padding: 8px;
      text-align: center;
    }

    /* 9. 滚动条 */
    .scrollbar-demo {
      height: 100px;
      overflow-y: scroll;
      background: #ecf0f1;
      padding: 10px;
    }

    .scrollbar-demo::-webkit-scrollbar {
      width: 1px;
    }

    .scrollbar-demo::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    .scrollbar-demo::-webkit-scrollbar-thumb {
      background: #888;
    }

    /* 10. 轮廓线 */
    .outline-demo {
      outline: 1px solid #e74c3c;
      outline-offset: 1px;
    }

    /* 响应式设计 */
    @media (max-width: 768px) {
      .demo-grid {
        grid-template-columns: 1fr;
      }

      .header h1 {
        font-size: 2em;
      }

      .content {
        padding: 20px;
      }
    }

    /* 设备像素比检测 */
    .dpr-info {
      background: #e8f5e8;
      border: 1px solid #4caf50;
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 20px;
      text-align: center;
    }

    .dpr-info h3 {
      color: #2e7d32;
      margin-bottom: 10px;
    }

    .dpr-value {
      font-size: 1.2em;
      font-weight: bold;
      color: #1b5e20;
    }

    .problem-indicator {
      background: #ffebee;
      border: 1px solid #f44336;
      border-radius: 4px;
      padding: 8px;
      margin-top: 10px;
      font-size: 0.9em;
      color: #c62828;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>1px问题各种场景演示</h1>
      <p>展示1px问题在不同CSS属性中的表现</p>
    </div>

    <div class="content">
      <!-- 设备像素比信息 -->
      <div class="dpr-info">
        <h3>当前设备信息</h3>
        <div class="dpr-value" id="dprInfo">检测中...</div>
      </div>

      <!-- 1. 分割线和装饰线 -->
      <div class="section">
        <h2>1. 分割线和装饰线</h2>
        <div class="demo-grid">
          <div class="demo-item">
            <div class="demo-title">水平分割线 (hr)</div>
            <div class="demo-description">hr元素的1px高度在高DPR设备上会变粗</div>
            <div class="demo-area hr-demo">
              <div>
                <p>上方内容</p>
                <hr>
                <p>下方内容</p>
              </div>
            </div>
            <div class="code-block">
              hr {
                height: 1px;
                background: #e74c3c;
              }
            </div>
            <div class="problem-indicator">
              在高 DPR 设备上，1px 高度的分割线会显示为 2px 或更粗
            </div>
          </div>

          <div class="demo-item">
            <div class="demo-title">文字下划线</div>
            <div class="demo-description">text-decoration的1px下划线在高DPR设备上会变粗</div>
            <div class="demo-area">
              <span class="underline-demo">这是带下划线的文字</span>
            </div>
            <div class="code-block">
              .underline-demo {
              text-decoration: underline;
              text-decoration-thickness: 1px;
              }
            </div>
          </div>

          <div class="demo-item">
            <div class="demo-title">删除线</div>
            <div class="demo-description">text-decoration的1px删除线在高DPR设备上会变粗</div>
            <div class="demo-area">
              <span class="strikethrough-demo">这是带删除线的文字</span>
            </div>
            <div class="code-block">
              .strikethrough-demo {
              text-decoration: line-through;
              text-decoration-thickness: 1px;
              }
            </div>
          </div>

          <div class="demo-item">
            <div class="demo-title">装饰线 (伪元素)</div>
            <div class="demo-description">使用伪元素创建的1px装饰线在高DPR设备上会变粗</div>
            <div class="demo-area">
              <span class="decorative-line">装饰线文字</span>
            </div>
            <div class="code-block">
              .decorative-line::after {
              height: 1px;
              background: linear-gradient(...);
              }
            </div>
          </div>
        </div>
      </div>

      <!-- 2. 阴影效果 -->
      <div class="section">
        <h2>2. 阴影效果</h2>
        <div class="demo-grid">
          <div class="demo-item">
            <div class="demo-title">盒阴影 (box-shadow)</div>
            <div class="demo-description">1px的阴影偏移在高DPR设备上会变粗</div>
            <div class="demo-area">
              <div class="box-shadow-demo" style="padding: 20px; background: white;">
                带阴影的元素
              </div>
            </div>
            <div class="code-block">
              .box-shadow-demo {
              box-shadow: 0 1px 3px rgba(0,0,0,0.3);
              }
            </div>
          </div>

          <div class="demo-item">
            <div class="demo-title">文字阴影 (text-shadow)</div>
            <div class="demo-description">1px的文字阴影在高DPR设备上会变粗</div>
            <div class="demo-area">
              <span class="text-shadow-demo">带阴影的文字</span>
            </div>
            <div class="code-block">
              .text-shadow-demo {
              text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
              }
            </div>
          </div>

          <div class="demo-item">
            <div class="demo-title">滤镜阴影 (drop-shadow)</div>
            <div class="demo-description">1px的滤镜阴影在高DPR设备上会变粗</div>
            <div class="demo-area">
              <div class="drop-shadow-demo" style="padding: 20px; background: white;">
                带滤镜阴影的元素
              </div>
            </div>
            <div class="code-block">
              .drop-shadow-demo {
              filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.3));
              }
            </div>
          </div>
        </div>
      </div>

      <!-- 3. 定位和布局 -->
      <div class="section">
        <h2>3. 定位和布局</h2>
        <div class="demo-grid">
          <div class="demo-item">
            <div class="demo-title">绝对定位偏移</div>
            <div class="demo-description">1px的定位偏移在高DPR设备上会变粗</div>
            <div class="demo-area position-demo">
              <div class="absolute-element"></div>
              相对定位的容器
            </div>
            <div class="code-block">
              .absolute-element {
              position: absolute;
              top: 1px;
              left: 1px;
              }
            </div>
          </div>

          <div class="demo-item">
            <div class="demo-title">网格间距 (grid-gap)</div>
            <div class="demo-description">1px的网格间距在高DPR设备上会变粗</div>
            <div class="demo-area">
              <div class="grid-demo">
                <div>网格项1</div>
                <div>网格项2</div>
                <div>网格项3</div>
                <div>网格项4</div>
              </div>
            </div>
            <div class="code-block">
              .grid-demo {
              gap: 1px;
              }
            </div>
          </div>
        </div>
      </div>

      <!-- 4. 字体和文字 -->
      <div class="section">
        <h2>4. 字体和文字</h2>
        <div class="demo-grid">
          <div class="demo-item">
            <div class="demo-title">小字体 (font-size)</div>
            <div class="demo-description">12px及以下的小字体在高DPR设备上可能显示异常</div>
            <div class="demo-area">
              <span class="small-font-demo">这是12px的小字体文字</span>
            </div>
            <div class="code-block">
              .small-font-demo {
              font-size: 12px;
              }
            </div>
          </div>

          <div class="demo-item">
            <div class="demo-title">字符间距 (letter-spacing)</div>
            <div class="demo-description">1px的字符间距在高DPR设备上会变粗</div>
            <div class="demo-area">
              <span class="letter-spacing-demo">字符间距文字</span>
            </div>
            <div class="code-block">
              .letter-spacing-demo {
              letter-spacing: 1px;
              }
            </div>
          </div>

          <div class="demo-item">
            <div class="demo-title">单词间距 (word-spacing)</div>
            <div class="demo-description">1px的单词间距在高DPR设备上会变粗</div>
            <div class="demo-area">
              <span class="word-spacing-demo">单词 间距 文字</span>
            </div>
            <div class="code-block">
              .word-spacing-demo {
              word-spacing: 1px;
              }
            </div>
          </div>
        </div>
      </div>

      <!-- 5. 背景和渐变 -->
      <div class="section">
        <h2>5. 背景和渐变</h2>
        <div class="demo-grid">
          <div class="demo-item">
            <div class="demo-title">线性渐变条纹</div>
            <div class="demo-description">1px的渐变条纹在高DPR设备上会变粗</div>
            <div class="demo-area gradient-demo">
              渐变背景
            </div>
            <div class="code-block">
              .gradient-demo {
              background: linear-gradient(45deg, #f1c40f 0%, #f1c40f 1px, transparent 1px);
              background-size: 10px 10px;
              }
            </div>
          </div>

          <div class="demo-item">
            <div class="demo-title">径向渐变点</div>
            <div class="demo-description">1px的径向渐变点在高DPR设备上会变粗</div>
            <div class="demo-area radial-demo">
              径向渐变背景
            </div>
            <div class="code-block">
              .radial-demo {
              background: radial-gradient(circle at center, #3498db 0%, #3498db 1px, transparent 1px);
              background-size: 20px 20px;
              }
            </div>
          </div>
        </div>
      </div>

      <!-- 6. 动画和过渡 -->
      <div class="section">
        <h2>6. 动画和过渡</h2>
        <div class="demo-grid">
          <div class="demo-item">
            <div class="demo-title">动画偏移</div>
            <div class="demo-description">1px的动画偏移在高DPR设备上会变粗</div>
            <div class="demo-area">
              <div class="animation-demo" style="padding: 20px; background: #3498db; color: white;">
                动画元素
              </div>
            </div>
            <div class="code-block">
              @keyframes move {
              50% { transform: translateX(1px); }
              }
            </div>
          </div>

          <div class="demo-item">
            <div class="demo-title">过渡偏移</div>
            <div class="demo-description">1px的过渡偏移在高DPR设备上会变粗</div>
            <div class="demo-area">
              <div class="transition-demo" style="padding: 20px; background: #e67e22; color: white; cursor: pointer;">
                悬停查看过渡效果
              </div>
            </div>
            <div class="code-block">
              .transition-demo:hover {
              transform: translateX(1px);
              }
            </div>
          </div>
        </div>
      </div>

      <!-- 7. 表单元素 -->
      <div class="section">
        <h2>7. 表单元素</h2>
        <div class="demo-grid">
          <div class="demo-item">
            <div class="demo-title">输入框边框</div>
            <div class="demo-description">1px的输入框边框在高DPR设备上会变粗</div>
            <div class="demo-area form-demo">
              <input type="text" placeholder="输入框">
              <button>按钮</button>
            </div>
            <div class="code-block">
              input, button {
              border: 1px solid #bdc3c7;
              }
            </div>
          </div>
        </div>
      </div>

      <!-- 8. 列表和表格 -->
      <div class="section">
        <h2>8. 列表和表格</h2>
        <div class="demo-grid">
          <div class="demo-item">
            <div class="demo-title">列表分割线</div>
            <div class="demo-description">1px的列表分割线在高DPR设备上会变粗</div>
            <div class="demo-area list-demo">
              <ul>
                <li>列表项1</li>
                <li>列表项2</li>
                <li>列表项3</li>
              </ul>
            </div>
            <div class="code-block">
              .list-demo li {
              border-bottom: 1px solid #ecf0f1;
              }
            </div>
          </div>

          <div class="demo-item">
            <div class="demo-title">表格边框</div>
            <div class="demo-description">1px的表格边框在高DPR设备上会变粗</div>
            <div class="demo-area">
              <table class="table-demo">
                <tr>
                  <th>标题1</th>
                  <th>标题2</th>
                </tr>
                <tr>
                  <td>数据1</td>
                  <td>数据2</td>
                </tr>
              </table>
            </div>
            <div class="code-block">
              .table-demo td, .table-demo th {
              border: 1px solid #bdc3c7;
              }
            </div>
          </div>
        </div>
      </div>

      <!-- 9. 轮廓线 -->
      <div class="section">
        <h2>9. 轮廓线</h2>
        <div class="demo-grid">
          <div class="demo-item">
            <div class="demo-title">元素轮廓线</div>
            <div class="demo-description">1px的轮廓线在高DPR设备上会变粗</div>
            <div class="demo-area">
              <div class="outline-demo" style="padding: 20px; background: white;">
                带轮廓线的元素
              </div>
            </div>
            <div class="code-block">
              .outline-demo {
              outline: 1px solid #e74c3c;
              outline-offset: 1px;
              }
            </div>
          </div>
        </div>
      </div>

      <!-- 总结 -->
      <div class="section">
        <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 6px; padding: 20px;">
          <h3 style="color: #856404; margin-bottom: 15px;">1px问题影响范围</h3>
          <ul style="color: #856404; line-height: 1.6;">
            <li><strong>视觉元素：</strong>边框、分割线、装饰线、阴影</li>
            <li><strong>布局元素：</strong>间距、定位偏移、网格间隙</li>
            <li><strong>文字元素：</strong>字体大小、字符间距、下划线</li>
            <li><strong>背景元素：</strong>渐变条纹、图案背景</li>
            <li><strong>交互元素：</strong>表单边框、按钮边框、轮廓线</li>
            <li><strong>动画元素：</strong>变换偏移、过渡效果</li>
          </ul>
          <p style="color: #856404; margin-top: 15px;">
            <strong>解决方案：</strong>对于所有涉及1px的场景，都可以使用之前介绍的transform: scale(0.5)方案来解决。
          </p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 检测设备像素比
    function detectDPR() {
      const dpr = window.devicePixelRatio || 1;
      const resolution = window.screen.width * dpr + ' x ' + window.screen.height * dpr;
      const cssPixels = window.screen.width + ' x ' + window.screen.height;
      const physicalPixelsPerCSSPixel = dpr * dpr;

      document.getElementById('dprInfo').innerHTML = `
                DPR: ${dpr}<br>
                CSS像素: ${cssPixels}<br>
                物理像素: ${resolution}<br>
                每个CSS像素对应: ${physicalPixelsPerCSSPixel}个物理像素
            `;
    }

    // 页面加载完成后检测
    window.addEventListener('load', detectDPR);

    // 窗口大小改变时重新检测
    window.addEventListener('resize', detectDPR);
  </script>
</body>

</html>