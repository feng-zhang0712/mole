# 多种方式实现点击滚动到某个位置

## 一、介绍

前端开发中，点击滚动到页面的某个位置是很常见的需求，并且有多种实现方式，每种方式适合不同的场景。

### 二、利用 window 的 API

#### 2.1 `window.scroll`

`window.scroll()` 方法用于将窗口滚动至文档中的特定位置。它有两种指定参数的方式。

第一种是 `scroll(xCoord, yCoord)`，其中 `xCoord` 指定文档在水平轴移动的距离；`yCoord` 指定文档在垂直轴移动的距离。这两个属性都是以文档的左上角为基准点进行移动。

```javascript
<button onclick="scroll(0, 100);">点击以向下滚动到第 100 个像素</button>
```

第二种是 `scroll(options)`，其中 `options` 是一个配置对象，有三个属性。

- `top`：指定沿 Y 轴滚动的距离。
- `left`：指定沿 X 轴滚动的距离。
- `behavior`：指定滚动时的动画行为。
  - `smooth` 表示平滑地滚动。
  - `instance` 表示立即滚动到指定的位置。
  - `auto` 此时的滚动行为由 [scroll-behavior](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-behavior) 属性的计算值来决定。

```javascript
window.scroll({
  top: 100,
  left: 100,
  behavior: "smooth",
});
```

上面的代码中，当前文档会平滑地，沿着 X 和 Y 轴正向移动 100 个像素。

下面分别是使用这个方法，滚动到文档顶部和底部的方式。

```javascript
// 滚动到页面顶部
window.scroll(0, 0);

// 滚动到页面底部
window.scroll(0, document.body.scrollHeight);
```

另外，在使用类似的 API 进行滚动时，为了让动画效果更平滑，可以结合 `requestAnimationFrame` 或者 `setInterval` 等方法一起使用。

```javascript
const smoothScrollTo = (target, duration = 500) => {
  const start = window.pageYOffset;
  const distance = target - start;
  const startTime = performance.now();

  const animation = (currentTime) => {
    const timeElapsed = currentTime - startTime;
    const progress = Math.min(timeElapsed / duration, 1);
    
    // 缓动函数
    const easeInOutQuad = t => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
    
    window.scrollTo(0, start + distance * easeInOutQuad(progress));
    
    if (progress < 1) {
      requestAnimationFrame(animation);
    }
  };
  
  requestAnimationFrame(animation);
};

smoothScrollTo(500);
```

#### 2.2 `window.scrollTo`

`window.scrollTo()` 方法跟 `window.scroll()` 的作用和使用方式完全一致。

#### 2.3 `window.scrollBy`

`window.scrollBy()` 方法用于指定当前页面沿 X 轴和 Y 轴滚动的相对偏移量。

它的使用方式跟 `window.scroll()` 完全一致，只不过此时的 `xCoord` 和 `yCoord` 表示的是相对于文档当前位置的偏移量。

```javascript
window.scrollBy(0, 100);
window.scrollBy({
  top: 0,
  left: 100,
  behavior: "smooth",
});

```

上面的代码，用于将当前文档向下滚动 100 个像素。

```javascript
// 向上滚动一页
window.scrollBy(0, -window.innerHeight);

// 向下滚动一页
window.scrollBy(0, window.innerHeight);
```

上面的代码，将当前文档分别向上/下滚动一页的距离。

### 三、利用 Element 的 API

#### 3.1 `Element.scrollTop` 属性

`Element.scrollTop` 属性用于读取和设置当前元素的垂直滚动条向下滚动的像素数量。这个属性的计算方式，是以当前元素的顶部为基准。

如果这个数值逐渐增加，说明当前内容正在向上滚动，反之则表示向下滚动。

```html
<html>
<head>
  <style>
    #scroller {
      overflow: scroll;
      height: 150px;
      width: 150px;
      border: 5px dashed orange;
    }

    #output {
      padding: 1rem 0;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="scroller">
      <p>
        在银河系西旋臂少人问津的末端、未经勘测的荒僻区域深处，有一颗无人理睬的小小黄色恒星。以约莫九千两百万英里半径绕其旋转的，是一颗彻底无关紧要的小小蓝绿色行星，这上面从猿猴繁衍而来的生命形式原始得让人吃惊，居然还以为数字式电子表是什么很高明的主意。
      </p>
    </div>
  </div>

  <div id="output">scrollTop: 0</div>

  <script>
    const scroller = document.querySelector("#scroller");
    const output = document.querySelector("#output");

    scroller.addEventListener("scroll", (event) => {
      output.textContent = `scrollTop: ${scroller.scrollTop}`;
    });
  </script>
</body>
</html>
```

![Element：scrollTop 属性演示](/2025/assets/element-scroll-top.gif)

这个属性在使用时有一些注意点。

- 如果元素不能滚动（比如：元素没有溢出），那么 `scrollTop` 的值是 0。
- 如果给 `scrollTop` 设置的值小于 0，那么 `scrollTop` 的值将变为 0。
- 如果给 `scrollTop` 设置的值大于元素内容最大高度，那么 `scrollTop` 的值将被设为元素最大高度。

注意，这个值是一个双精度浮点数。

#### 3.2. `Element.scrollLeft` 属性

`Element.scrollLeft` 属性用于读取和设置当前元素的内容，距离其左边的偏移量。这个属性的计算方式，是以当前元素的左侧边框内部为基准。

如果这个数值逐渐增加，说明当前内容正在向左移动，反之则表示向右滚动。

注意，这个值是一个双精度浮点数。

#### 3.3 `Element.scroll`

`Element.scroll()` 方法跟 `window.scroll()` 使用方式完全一致，只不过调用这个方法的对象，是具体的某个 Element 对象。

```javascript
const button = document.getElementById('btn');

button.scroll(100, 100);
button.scroll({
  top: 100,
  left: 100,
  behavior: "smooth",
});
```

#### 3.4 `Element.scrollTo`

`Element.scrollTo()` 方法跟 `window.scroll()` 的作用和使用方式完全一致，只不过调用这个方法的对象，是具体的某个元素对象。

#### 3.5 `Element.scrollBy`

`Element.scrollBy()` 方法跟 `window.scrollBy()` 的作用和使用方式完全一致，只不过调用这个方法的对象，是具体的某个元素对象。

### 四、`<a>` 标签锚点链接

使用锚点链接进行跳转，就是将 `<a>` 标签的 `href` 属性值设置为要跳转到的元素的 `id` 属性的值，格式为 `<a href="#id">`。

```html
<!-- HTML锚点 -->
<a href="#section1">跳转到第一节</a>
<!-- ... -->

<h2 id="section1">第一节</h2>
```

上面代码中，当点击 `<a>` 标签时，页面将滚动到 `<h2>` 标签所在的位置。

另外，设置 `<a>` 标签的 `href` 属性为 `href="#top"` 或者 `href="#"`，点击后可以回到文档顶部。

### 五、使用 Location 对象跳转

Location 对象中有两个属性，可以用来操作跳转。

其一是 `Location.href`，这个属性表示 Location 对象的完整 URL 字符串。通过设置这个属性的片段部分，可以实现直接跳转。

```html
<html>
<body>
  <h2 id="section1">第一节</h2>

  <script>
    document.addEventListener('load', () => {
      setTimeout(() => {
        document.location.href = "#section1";
      }, 1000);
    });
  </script>
</body>
</html>
```

上面的代码，在页面加载完成一秒后，会自动跳转到 `<h2>` 标签所在的位置。

另一个是 `Location.hash`，这个属性表示 Location 对象的地址片段字符串部分，从 `#` 开始。

```javascript
document.location.hash = "#section1";
```

注意，`Location.href` 属性是浏览器唯一允许跨域写入的属性。

除了上面说的这两个属性，Location 对象中还有个 `Location.reload(forceGet)` 方法，它的参数 `forceGet` 是一部布尔值。如果参数为 `true`，浏览器将向服务器重新请求这个网页，重新加载后，网页将滚动到头部（即 `scrollTop === 0`）。如果参数是 `false` 或为空，浏览器将从本地缓存重新加载该网页，并且重新加载后，网页的视口位置是重新加载前的位置。

可以利用这个特性，通过设置 `Location.reload(true)` 来跳转到顶部，不过这种方式会带来很差的用户体验。

### 六、`Element.scrollIntoView()`

`scrollIntoView()` 是 Element 接口中的一个方法，用于将父容器滚动到当前元素的特定位置。它有三种指定参数的方式。

第一种方式是直接执行 `scrollIntoView()` 方法。

第二种方式是传递一个布尔值 `scrollIntoView(alignToTop)`。

默认值为 `true`，此时，元素的顶端将和其所在滚动区的可视区域的顶端对齐。相当于下面的设置。

```text
scrollIntoViewOptions: {
  block: "start",
  inline: "nearest"
}
```

如果设置为 `false`，元素的底端将和其所在滚动区的可视区域的底端对齐。

```text
scrollIntoViewOptions: {
  block: "end",
  inline: "nearest"
}
```

第三种方式是指定一个配置对象 `scrollIntoView(options)`，`options` 对象中有三个可选属性。

- `block`：指定垂直方向的对齐方式，可选值为 `start`（默认值）、`center`、`end` 或 `nearest`。
- `inline`：指定水平方向的对齐方式，可选值为 `start`、`center`、`end` 或 `nearest`（默认值）。
- `behavior`：指定滚动行为。有三个可选值：

  - `smooth`：平滑动画的滚动效果。
  - `instant`：立即滚动到指定位置，没有任何动画效果。
  - `auto`：滚动行为由 [scroll-behavior](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-behavior) 的计算值决定。

```javascript
const element = document.getElementById("box");

// 滚动到可视区域
element.scrollIntoView();
// 滚动到顶部
element.scrollIntoView(true);
// 滚动到底部
element.scrollIntoView({ block: "end" });
// 采用平滑滚动的方式，将 box 滚动到父容器的底部
element.scrollIntoView({
  block: "end",
  inline: "nearest",
  behavior: "smooth",
});
```

## 七、参考

- [MDN](https://developer.mozilla.org/)
- [Element 节点，阮一峰](https://wangdoc.com/javascript/dom/element)
- [Location 对象，阮一峰](https://wangdoc.com/javascript/bom/location#location-%E5%AF%B9%E8%B1%A1)
